<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart &mdash; UR-Robotiq Integrated Driver Documentation 0.0.1-alpha documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="RVL UR-Robotiq API" href="api.html" />
    <link rel="prev" title="RVL UR-Robotiq Integrated Driver" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> UR-Robotiq Integrated Driver Documentation
          </a>
              <div class="version">
                0.0.1-alpha
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#universal-robots-setup">Universal Robots Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup-rs485-urcap-and-socat">Setup RS485 URCap and <code class="docutils literal notranslate"><span class="pre">socat</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#docker-environment-setup">Docker Environment Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-docker">Installing Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clone-the-source-code-repository">Clone the Source Code Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-or-pull-the-docker-image">Build or Pull the Docker Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-the-ros-container">Creating the ROS Container</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#inside-the-container">Inside the Container</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#robot-xacro-and-urdf">Robot Xacro and URDF</a></li>
<li class="toctree-l3"><a class="reference internal" href="#launching-the-ur-driver">Launching the UR Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-and-running-ros">Building and Running ROS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#debugging">Debugging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">RVL UR-Robotiq API</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">UR-Robotiq Integrated Driver Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Quickstart</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pages/quickstart.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline"></a></h1>
<div class="section" id="universal-robots-setup">
<h2>Universal Robots Setup<a class="headerlink" href="#universal-robots-setup" title="Permalink to this headline"></a></h2>
<div class="section" id="setup-rs485-urcap-and-socat">
<h3>Setup RS485 URCap and <code class="docutils literal notranslate"><span class="pre">socat</span></code><a class="headerlink" href="#setup-rs485-urcap-and-socat" title="Permalink to this headline"></a></h3>
<p>Follow the <a class="reference external" href="https://github.com/UniversalRobots/Universal_Robots_ToolComm_Forwarder_URCap/blob/master/doc/install_urcap.md">step-by-step
instructions</a>
provided by Universal Robots to allow for tool communication through a socket on
port 54321.</p>
<p>The control box filesystem can be accessed via <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">root&#64;[ROBOT-IP]</span></code> with the
default password <code class="docutils literal notranslate"><span class="pre">easybot</span></code>. You should see the internal UR prompt, i.e.,</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Universal Robots A/S Linux image</span>

<span class="go">Production image</span>
<span class="gp">root@ur-[serial]:~#</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">socat</span></code> can then be installed either from source or using a package manager.
You may want to use the attached <code class="docutils literal notranslate"><span class="pre">socat-robotiq-gripper.service</span></code> so that
<code class="docutils literal notranslate"><span class="pre">socat</span></code> starts up every time the system is powered on.</p>
<p>To setup the service file, just place it in <code class="docutils literal notranslate"><span class="pre">/etc/systemd/system/</span></code> and run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo systemctl <span class="nb">enable</span> socat-robotiq-gripper.service
</pre></div>
</div>
<p>which will start the <code class="docutils literal notranslate"><span class="pre">socat</span></code> service on boot.</p>
</div>
</div>
<div class="section" id="docker-environment-setup">
<h2>Docker Environment Setup<a class="headerlink" href="#docker-environment-setup" title="Permalink to this headline"></a></h2>
<div class="section" id="installing-docker">
<h3>Installing Docker<a class="headerlink" href="#installing-docker" title="Permalink to this headline"></a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo apt-get install docker.io
</pre></div>
</div>
<p>or follow the WSL 2 backend installation guide at <a class="reference external" href="https://docs.docker.com/get-docker/">Get Docker</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using a Linux distribution, be sure to follow <a class="reference external" href="https://docs.docker.com/engine/install/linux-postinstall/">Docker Post-Installation Steps</a>.</p>
</div>
</div>
<div class="section" id="clone-the-source-code-repository">
<h3>Clone the Source Code Repository<a class="headerlink" href="#clone-the-source-code-repository" title="Permalink to this headline"></a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git clone --recurse-submodules https://github.com/robotic-vision-lab/UR-Robotiq-Integrated-Driver
</pre></div>
</div>
</div>
<div class="section" id="build-or-pull-the-docker-image">
<h3>Build or Pull the Docker Image<a class="headerlink" href="#build-or-pull-the-docker-image" title="Permalink to this headline"></a></h3>
<p>You can build the image using the Dockerfile already included in the repository</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span> UR-Robotiq-Integrated-Driver/docker
<span class="gp">$ </span>docker build -t rvl-ur-robotiq-driver -f Dockerfile.noetic .
</pre></div>
</div>
<p>or you can pull it directly from Docker Hub with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker pull mqt0029/rvl-ur-robotiq-driver:latest<span class="sb">`</span> 
</pre></div>
</div>
<p>If you pulled from Docker Hub, then be sure to retag your image to
<code class="docutils literal notranslate"><span class="pre">rvl-ur-robotiq-driver:latest</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker tag mqt0029/rvl-ur-robotiq-driver:latest rvl-ur-robotiq-driver:latest
</pre></div>
</div>
<p>or update the image name in the launch script accordingly.</p>
</div>
<div class="section" id="creating-the-ros-container">
<h3>Creating the ROS Container<a class="headerlink" href="#creating-the-ros-container" title="Permalink to this headline"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure to check your image name before running the script.</p>
</div>
<p>The included <code class="docutils literal notranslate"><span class="pre">[windows_]launch_docker_container.sh</span></code> is a useful script for
creating and accessing docker containers created from the built/pulled image.
Simply run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sh launch_docker_container.sh
</pre></div>
</div>
<p>The first run will create the container if it does not already exist.
Subsequent runs will attach the terminal to the docker container via <code class="docutils literal notranslate"><span class="pre">bash</span></code>.
At this point, you should see the following prompt</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[...]</span>
<span class="go">root ~/catkin_ws</span>
<span class="go">&gt; </span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="inside-the-container">
<h2>Inside the Container<a class="headerlink" href="#inside-the-container" title="Permalink to this headline"></a></h2>
<p>With our setup using a UR5e and Robotiq 2F-85 gripper, we have customized the
accompanying <code class="docutils literal notranslate"><span class="pre">xacro</span></code> (which also includes the generated <code class="docutils literal notranslate"><span class="pre">urdf</span></code>) to match our
specific machine description. You may want to modify the launch file to use the
correct files for your own setup.</p>
<p>While the base path is commonly <code class="docutils literal notranslate"><span class="pre">[...]/catkin_ws/src</span></code>, this is not always the
case. Paths will be relative to where you place your ROS packages.</p>
<div class="section" id="robot-xacro-and-urdf">
<h3>Robot Xacro and URDF<a class="headerlink" href="#robot-xacro-and-urdf" title="Permalink to this headline"></a></h3>
<p>The included ROS package <code class="docutils literal notranslate"><span class="pre">rvl_robot_description</span></code> contains an example of our
robot setup. The file <code class="docutils literal notranslate"><span class="pre">[...]/rvl_robot_description/xacro/rvl_ur5e.xacro</span></code> can be
a good place to start and components should be fairly straightforward to swap
in and move around.</p>
</div>
<div class="section" id="launching-the-ur-driver">
<h3>Launching the UR Driver<a class="headerlink" href="#launching-the-ur-driver" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ur_robot_driver</span></code> package launch file has been modified to work with the
tool port gripper and our particular setup. You can use the launch file
<code class="docutils literal notranslate"><span class="pre">[...]/rvl_ur_remote_dashboard/launch/rvl_ur5e_bringup.launch</span></code> as a reference,
and modify it to fit your setup. The important sections are highlighted below.</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;robot_ip&quot;</span> <span class="na">default=</span><span class="s">&quot;192.168.1.147&quot;</span> <span class="na">doc=</span><span class="s">&quot;IP address by which ...&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;robot_description_file&quot;</span> <span class="na">default=</span><span class="s">&quot;$(find rvl_ur_remote_dashboard)/launch/load_rvl_ur5e.launch&quot;</span> <span class="na">doc=</span><span class="s">&quot;Robot description launch file.&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;kinematics_config&quot;</span> <span class="na">default=</span><span class="s">&quot;$(find rvl_ur_remote_dashboard)/configs/ur5e_calibration.yaml&quot;</span> <span class="na">doc=</span><span class="s">&quot;Kinematics config file used ...&quot;</span><span class="nt">/&gt;</span>

<span class="cm">&lt;!-- always start the UR side socat --&gt;</span>
<span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;use_tool_communication&quot;</span> <span class="na">default=</span><span class="s">&quot;true&quot;</span> <span class="na">doc=</span><span class="s">&quot;On e-Series robots tool communication can be enabled with this argument&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Double check that your calibration file is correct or <a class="reference external" href="https://github.com/UniversalRobots/Universal_Robots_ROS_Driver/blob/master/ur_calibration/README.md">retrieve it
accordingly</a>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure your robot description is correct! This is <em>crucial</em> to generating
your own URDF and SRDF that MoveIt! uses to plan all subsequent motions.</p>
</div>
</div>
<div class="section" id="building-and-running-ros">
<h3>Building and Running ROS<a class="headerlink" href="#building-and-running-ros" title="Permalink to this headline"></a></h3>
<p>A few aliases have been provided to quickly setup ROS dependencies and paths.
<code class="docutils literal notranslate"><span class="pre">bash</span></code> will also automatically source <code class="docutils literal notranslate"><span class="pre">devel/setup.bash</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>run_rosdep
<span class="go">[...] installing dependencies</span>

<span class="gp">$ </span>rebuild_catkin
<span class="go">[...] building catkin workspace</span>

<span class="gp">$ </span>roslaunch &lt;your_stuff&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline"></a></h2>
<p>Since this driver is built inside a Docker container, the most common issue is
networking. A good place to start is to ensure that all the ports (or the
network interface) are properly exposed, the robot IP is correct, and there is
nothing interfering with ROS communications both ways. Otherwise, the host OS
should not be a problem. However, should any issues arise, please <a class="reference external" href="https://github.com/robotic-vision-lab/UR-Robotiq-Integrated-Driver/issues">open an
issue on our GitHub repository</a>.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="RVL UR-Robotiq Integrated Driver" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api.html" class="btn btn-neutral float-right" title="RVL UR-Robotiq API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Minh Tram.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>